<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FANTINAL PRESTIGE V32</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Montserrat:wght@300;400;700;900&display=swap');
        
        :root { 
            --gold: #d4af37; --dark: #05070a; --glass: rgba(15, 15, 20, 0.85);
            --v0: #10b981; --v1: #3b82f6; --v2: #cd7f32; --v3: #c0c0c0; --v4: #ffd700;
            --v5: linear-gradient(45deg, #a855f7, #fbbf24);
            --v6: linear-gradient(45deg, #ffffff, #ffd700);
        }

        body { background: var(--dark); color: #e2e8f0; font-family: 'Montserrat', sans-serif; overflow-x: hidden; }
        .luxury-font { font-family: 'Cinzel', serif; }
        .glass-card { background: var(--glass); backdrop-filter: blur(15px); border: 1px solid rgba(212, 175, 55, 0.15); border-radius: 20px; }
        .gold-text { background: linear-gradient(135deg, #d4af37, #f9e29c); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 900; }
        .btn-premium { background: linear-gradient(135deg, #d4af37, #f9e29c); color: #000; font-weight: 800; border-radius: 12px; transition: 0.3s; }
        .btn-premium:active { transform: scale(0.95); }

        /* VIP BADGES */
        .vip-tag { padding: 4px 10px; border-radius: 6px; font-size: 9px; font-weight: 900; text-transform: uppercase; color: white; display: inline-flex; align-items: center; }
        .v-0 { background: var(--v0); } .v-1 { background: var(--v1); } .v-2 { background: var(--v2); }
        .v-3 { background: var(--v3); color: #000; } .v-4 { background: var(--v4); color: #000; }
        .v-5 { background: var(--v5); box-shadow: 0 0 15px rgba(168, 85, 247, 0.5); }
        .v-6 { background: var(--v6); border: 1px solid gold; color: #000; animation: shine 2s infinite; }
        
        @keyframes shine { 0%, 100% { opacity: 0.9; } 50% { opacity: 1; filter: brightness(1.2); } }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        .sidebar { position: fixed; right: -100%; top: 0; width: 80%; height: 100%; background: #0a0c10; z-index: 5000; transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1); border-left: 1px solid rgba(212, 175, 55, 0.2); }
        .sidebar.active { right: 0; }
        input, select, textarea { background: rgba(255,255,255,0.03) !important; border: 1px solid rgba(212, 175, 55, 0.1) !important; color: white; padding: 12px; border-radius: 12px; outline: none; }
        input:focus { border-color: var(--gold) !important; }
    </style>
</head>
<body>

    <div id="notiBox" class="fixed top-6 right-6 z-[9999] flex flex-col gap-3"></div>
    <div id="overlay" class="fixed inset-0 bg-black/80 hidden z-[4000]" onclick="toggleMenu()"></div>

    <div id="sidebar" class="sidebar p-8 overflow-y-auto">
        <div class="flex justify-between items-center mb-8">
            <h2 class="luxury-font text-xl gold-text">CONTROL PANEL</h2>
            <button onclick="toggleMenu()" class="text-2xl text-gold">‚úï</button>
        </div>
        <div class="glass-card p-5 mb-6">
            <div id="vipBadge" class="vip-tag v-0 mb-3">VIP 0</div>
            <p id="userEmail" class="text-[10px] opacity-50 truncate mb-4">loading...</p>
            <div class="grid grid-cols-2 gap-4 border-t border-white/5 pt-4">
                <div><p class="text-[8px] opacity-40 uppercase">Balance</p><p id="uBalance" class="text-lg font-black text-white">0 C</p></div>
                <div><p class="text-[8px] opacity-40 uppercase">Used</p><p id="uUsage" class="text-lg font-black text-white">0 C</p></div>
            </div>
        </div>
        <nav class="space-y-3">
            <button onclick="navTo('homeSection')" class="w-full p-4 glass-card text-left text-[10px] font-bold uppercase tracking-widest">Library Archives</button>
            <button onclick="navTo('chatSection')" class="w-full p-4 glass-card text-left text-[10px] font-bold uppercase tracking-widest border-blue-500/20">Global Communication</button>
            <button onclick="navTo('depositSection')" class="w-full p-4 btn-premium text-[10px] uppercase">Buy Credits</button>
            <button onclick="navTo('giftSection')" class="w-full p-4 glass-card text-left text-[10px] font-bold uppercase tracking-widest">Redeem Code</button>
            <button onclick="auth.signOut()" class="w-full p-4 text-red-500 text-[10px] font-bold uppercase text-center mt-10">Disconnect System</button>
        </nav>
    </div>

    <nav class="sticky top-0 z-[3000] px-6 py-4 glass-card rounded-none border-x-0 border-t-0 flex justify-between items-center">
        <h1 onclick="location.reload()" class="luxury-font text-2xl gold-text cursor-pointer tracking-tighter">FANTINAL</h1>
        <button onclick="toggleMenu()" class="p-2 text-gold"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M3 12h18M3 6h18M3 18h18"/></svg></button>
    </nav>

    <main class="max-w-xl mx-auto p-5 pb-32">
        
        <div id="homeAds" class="mb-8 flex overflow-x-auto gap-4 snap-x no-scrollbar rounded-3xl"></div>

        <div id="authSection" class="hidden py-10 text-center">
            <h2 class="luxury-font text-3xl gold-text mb-8">Access Terminal</h2>
            <div class="glass-card p-8 space-y-4">
                <input type="email" id="lEmail" placeholder="Access Email">
                <input type="password" id="lPass" placeholder="Security Password">
                <button onclick="login()" class="w-full btn-premium py-4 uppercase text-xs">Login</button>
                <button onclick="register()" class="w-full text-[10px] opacity-50 uppercase mt-4 tracking-widest">Create New Archive</button>
            </div>
        </div>

        <div id="homeSection" class="hidden">
            <div class="relative mb-8">
                <input type="text" id="searchInput" oninput="searchBooks()" placeholder="Search archives..." class="pl-10">
                <span class="absolute left-4 top-4 opacity-30 text-[12px]">üîç</span>
            </div>
            <div class="flex overflow-x-auto no-scrollbar gap-2 mb-8">
                <button onclick="filterBooks('All')" class="px-5 py-2 glass-card text-[9px] font-black uppercase">All</button>
                <button onclick="filterBooks('Fan Fiction')" class="px-5 py-2 glass-card text-[9px] font-black uppercase">Fiction</button>
                <button onclick="filterBooks('Life')" class="px-5 py-2 glass-card text-[9px] font-black uppercase">Life</button>
            </div>
            <div id="bookGrid" class="grid grid-cols-2 gap-5"></div>
            
            <div id="adminBtn" class="hidden mt-10">
                <button onclick="showSection('adminDashboard')" class="w-full py-4 bg-red-900/10 text-red-500 border border-red-500/20 rounded-xl text-[10px] font-black uppercase tracking-widest">Master Admin Terminal</button>
            </div>
        </div>

        <div id="chatSection" class="hidden">
            <button onclick="showSection('homeSection')" class="mb-4 text-[10px] font-bold opacity-50">‚Üê BACK TO ARCHIVES</button>
            <div class="glass-card flex flex-col h-[65vh]">
                <div id="chatBody" class="flex-1 overflow-y-auto p-4 space-y-4 no-scrollbar"></div>
                <div class="p-4 border-t border-white/5 flex gap-2">
                    <input type="text" id="chatInput" placeholder="Write message..." class="flex-1">
                    <button onclick="sendChat()" class="btn-premium px-6 text-[10px]">SEND</button>
                </div>
            </div>
        </div>

        <div id="adminDashboard" class="hidden space-y-6">
            <div class="flex justify-between items-center">
                <button onclick="showSection('homeSection')" class="text-[10px] font-black">‚Üê EXIT</button>
                <h3 class="gold-text uppercase text-xs">Admin Master</h3>
            </div>
            <div class="grid grid-cols-3 gap-3">
                <div class="glass-card p-4 text-center"><p class="text-[7px] opacity-40">REVENUE</p><p id="totalRevenue" class="text-xs font-black gold-text">0 C</p></div>
                <div class="glass-card p-4 text-center"><p class="text-[7px] opacity-40">USERS</p><p id="totalUsers" class="text-xs font-black">0</p></div>
                <div class="glass-card p-4 text-center"><p class="text-[7px] opacity-40">TID REQ</p><p id="totalOrders" class="text-xs font-black text-blue-400">0</p></div>
            </div>
            
            <div id="tab-pay" class="space-y-3">
                <p class="text-[9px] font-black gold-text uppercase">Pending Transactions</p>
                <div id="pendingList" class="space-y-3"></div>
            </div>

            <div class="space-y-4">
                <button onclick="openNovelForm()" class="w-full btn-premium py-4 text-[10px] uppercase tracking-widest">+ Add New Novel</button>
                <div id="admNovelList" class="space-y-2"></div>
            </div>
        </div>

        <div id="chapterView" class="hidden">
            <button onclick="showSection('homeSection')" class="mb-6 text-[10px] font-bold opacity-50">‚Üê BACK</button>
            <div class="flex gap-5 mb-8">
                <img id="bookCover" class="w-28 h-40 object-cover rounded-xl shadow-2xl glass-card">
                <div class="flex-1 pt-2">
                    <h2 id="bookTitle" class="luxury-font text-xl gold-text mb-2 leading-tight">Title</h2>
                    <p id="bookViewCount" class="text-[9px] opacity-40 uppercase tracking-widest">0 VIEWS</p>
                </div>
            </div>
            <div id="chapterList" class="space-y-3"></div>
        </div>

        <div id="readerSection" class="hidden fixed inset-0 bg-[#05070a] z-[6000] p-6 overflow-y-auto">
            <div class="max-w-xl mx-auto pb-40">
                <div class="flex justify-between items-center mb-10">
                   <button onclick="showSection('chapterView')" class="text-gold text-xl">‚úï</button>
                   <span id="readerTitle" class="text-[10px] font-black gold-text opacity-50 uppercase">Read</span>
                </div>
                <div id="readerBody" class="text-lg leading-[2] text-slate-300 whitespace-pre-line"></div>
            </div>
        </div>

        <div id="giftSection" class="hidden">
            <div class="glass-card p-8 text-center">
                <h2 class="luxury-font text-xl gold-text mb-6">Redeem Secret Code</h2>
                <input type="text" id="redeemInput" class="mb-4 text-center text-lg font-black tracking-widest uppercase" placeholder="FANT-XXXX">
                <button onclick="redeemGift()" class="w-full btn-premium py-4 uppercase">Unlock Credits</button>
            </div>
        </div>

        <div id="depositSection" class="hidden space-y-6">
            <div class="glass-card p-6">
                <h3 class="text-xs font-black gold-text mb-4 uppercase">Daily Ad Reward</h3>
                <div id="adVidBox" class="hidden mb-4 aspect-video rounded-xl overflow-hidden bg-black">
                    <iframe id="adIframe" class="w-full h-full" src="" frameborder="0"></iframe>
                </div>
                <button id="watchBtn" onclick="startWatchAds()" class="w-full btn-premium py-4 text-[10px] uppercase">Watch Ad (+20 Credits)</button>
                <button id="claimBtn" onclick="claimAdCoin()" class="hidden w-full btn-premium py-4 text-[10px] uppercase animate-pulse">Claim Now</button>
            </div>
            
            <div class="glass-card p-6">
                <h3 class="text-xs font-black gold-text mb-4 uppercase">Top Up Credits</h3>
                <select id="coinPackage" class="mb-4 w-full">
                    <option value="1000">1,000 Credits</option>
                    <option value="5000">5,000 Credits</option>
                    <option value="10000">10,000 Credits</option>
                </select>
                <input type="text" id="payTid" placeholder="Transaction ID (Last 6 Digits)" class="mb-4">
                <button onclick="submitDeposit()" class="w-full btn-premium py-4 text-[10px] uppercase">Submit Deposit</button>
            </div>
        </div>

        <div id="novelFormSection" class="hidden space-y-4">
            <h2 class="luxury-font text-xl gold-text">NOVEL REGISTRY</h2>
            <input type="text" id="nTitle" placeholder="Novel Title">
            <input type="text" id="nCover" placeholder="Cover Image URL">
            <select id="nGenre" class="w-full">
                <option value="Fan Fiction">Fan Fiction</option>
                <option value="Life">Life</option>
                <option value="True">True</option>
            </select>
            <button onclick="saveNovel()" class="w-full btn-premium py-4 uppercase">Save Novel</button>
        </div>

        <div id="chapterForm" class="hidden space-y-4">
            <h2 class="luxury-font text-xl gold-text">NEW CHAPTER</h2>
            <input type="text" id="cTitle" placeholder="Chapter Title">
            <textarea id="cContent" rows="12" placeholder="Chapter Story Content..."></textarea>
            <input type="number" id="cPrice" placeholder="Price (0 for Free)">
            <button onclick="saveChapter()" class="w-full btn-premium py-4 uppercase">Publish Chapter</button>
        </div>

    </main>

    <script>
        // CONFIG & INIT
        const firebaseConfig = {
            apiKey: "AIzaSyBxh92A7E6Egtk4kYB23Wmlelq13YYh1J0",
            authDomain: "fantinal-publishing-5b960.firebaseapp.com",
            projectId: "fantinal-publishing-5b960",
            storageBucket: "fantinal-publishing-5b960.firebasestorage.app",
            messagingSenderId: "961612304854",
            appId: "1:961612304854:web:6bf7b03072ed83b58b9477"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth(), db = firebase.firestore();

        let curB = "", currentUserData = {}, allBooks = [];

        // AUTH SYSTEM
        auth.onAuthStateChanged(user => {
            if(user) {
                db.collection('users').doc(user.uid).onSnapshot(doc => {
                    if(doc.exists) {
                        currentUserData = doc.data();
                        updateUserUI();
                        checkMonthlyBonus();
                    }
                });
                if(user.email === 'xztka49@gmail.com') {
                    document.getElementById('adminBtn').classList.remove('hidden');
                    loadAdminData();
                }
                showSection('homeSection'); loadAllBooks(); loadAds(); loadChat();
            } else showSection('authSection');
        });

        async function login() { 
            try { await auth.signInWithEmailAndPassword(lEmail.value, lPass.value); } 
            catch(e) { showNoti(e.message, 'error'); }
        }

        async function register() {
            try {
                const r = await auth.createUserWithEmailAndPassword(lEmail.value, lPass.value);
                await db.collection('users').doc(r.user.uid).set({ 
                    email: r.user.email, coins: 0, usage: 0, bought: [], lastBonus: null, date: new Date() 
                });
            } catch(e) { showNoti(e.message, 'error'); }
        }

        // VIP LOGIC (7 LEVELS)
        function getVipInfo(coins, usage) {
            const total = (coins || 0) + (usage || 0);
            if(total >= 3000000) return { lv: 6, tag: 'SUPREME', cls: 'v-6', bonus: 15000 };
            if(total >= 1000000) return { lv: 5, tag: 'MYTHIC', cls: 'v-5', bonus: 8000 };
            if(total >= 300000) return { lv: 4, tag: 'GOLD', cls: 'v-4', bonus: 4000 };
            if(total >= 100000) return { lv: 3, tag: 'SILVER', cls: 'v-3', bonus: 1000 };
            if(total >= 40000) return { lv: 2, tag: 'BRONZE', cls: 'v-2', bonus: 0 };
            if(total >= 10000) return { lv: 1, tag: 'PRO', cls: 'v-1', bonus: 0 };
            return { lv: 0, tag: 'ROOKIE', cls: 'v-0', bonus: 0 };
        }

        function updateUserUI() {
            const info = getVipInfo(currentUserData.coins, currentUserData.usage);
            const badge = document.getElementById('vipBadge');
            badge.innerText = `VIP ${info.lv} : ${info.tag}`;
            badge.className = `vip-tag ${info.cls} mb-3`;
            document.getElementById('uBalance').innerText = (currentUserData.coins || 0).toLocaleString() + " C";
            document.getElementById('uUsage').innerText = (currentUserData.usage || 0).toLocaleString() + " C";
            document.getElementById('userEmail').innerText = currentUserData.email;
        }

        // GLOBAL CHAT
        function loadChat() {
            db.collection('chat').orderBy('date', 'desc').limit(40).onSnapshot(snap => {
                document.getElementById('chatBody').innerHTML = snap.docs.map(doc => {
                    const d = doc.data(); const info = getVipInfo(d.coins, d.usage);
                    return `<div class="p-3 glass-card mb-1">
                        <div class="flex items-center gap-2 mb-1">
                            <span class="vip-tag ${info.cls}">${info.tag}</span>
                            <span class="text-[9px] font-bold opacity-40">${d.email.split('@')[0]}</span>
                        </div>
                        <p class="text-xs text-white/90">${d.msg}</p>
                    </div>`;
                }).join('');
            });
        }

        async function sendChat() {
            const m = chatInput.value.trim(); if(!m) return;
            chatInput.value = "";
            await db.collection('chat').add({ 
                email: currentUserData.email, msg: m, 
                coins: currentUserData.coins, usage: currentUserData.usage, date: new Date() 
            });
        }

        // BOOK SYSTEM
        async function loadAllBooks() {
            const snap = await db.collection('books').orderBy('date', 'desc').get();
            allBooks = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));
            renderBooks(allBooks);
        }

        function renderBooks(list) {
            bookGrid.innerHTML = list.map(b => `
                <div class="glass-card overflow-hidden active:scale-95 transition" onclick="openBook('${b.id}')">
                    <img src="${b.cover}" class="h-44 w-full object-cover">
                    <div class="p-3">
                        <p class="text-[7px] gold-text uppercase">${b.genre}</p>
                        <p class="text-[10px] font-bold truncate uppercase text-white">${b.title}</p>
                    </div>
                </div>`).join('');
        }

        async function openBook(id) {
            curB = id; showSection('chapterView');
            const b = allBooks.find(x => x.id === id);
            bookCover.src = b.cover;
            bookTitle.innerText = b.title;
            bookViewCount.innerText = (b.views || 0) + " VIEWS";
            
            const chaps = await db.collection('books').doc(id).collection('chapters').orderBy('date', 'asc').get();
            chapterList.innerHTML = chaps.docs.map((doc, i) => {
                const c = doc.data();
                const isBought = currentUserData.bought?.includes(doc.id) || c.price == 0;
                return `<div class="p-4 glass-card flex justify-between items-center">
                    <div><p class="text-[7px] opacity-40 uppercase">Episode ${i+1}</p><p class="text-[10px] font-bold uppercase">${c.title}</p></div>
                    <button onclick="readChap('${doc.id}', ${c.price})" class="text-[9px] font-black gold-text uppercase">
                        ${isBought ? 'READ' : 'UNLOCK '+c.price+'C'}
                    </button>
                </div>`;
            }).join('');
            
            db.collection('books').doc(id).update({ views: firebase.firestore.FieldValue.increment(1) });
        }

        async function readChap(chapId, price) {
            const isUnlocked = currentUserData.bought?.includes(chapId) || price == 0 || auth.currentUser.email === 'xztka49@gmail.com';
            
            if(!isUnlocked) {
                if(currentUserData.coins < price) return showNoti("Not enough credits", "error");
                if(!confirm(`Unlock this chapter for ${price}C?`)) return;
                
                await db.collection('users').doc(auth.currentUser.uid).update({
                    coins: firebase.firestore.FieldValue.increment(-price),
                    usage: firebase.firestore.FieldValue.increment(price),
                    bought: firebase.firestore.FieldValue.arrayUnion(chapId)
                });
            }

            const doc = await db.collection('books').doc(curB).collection('chapters').doc(chapId).get();
            readerTitle.innerText = doc.data().title;
            readerBody.innerText = doc.data().content;
            showSection('readerSection');
        }

        // ADMIN FUNCTIONS
        async function loadAdminData() {
            db.collection('coinRequests').where('status','==','pending').onSnapshot(snap => {
                totalOrders.innerText = snap.size;
                pendingList.innerHTML = snap.docs.map(doc => `
                    <div class="glass-card p-4 flex justify-between items-center">
                        <div class="text-[9px]">
                            <p class="font-bold">${doc.data().email}</p>
                            <p class="gold-text">${doc.data().amt}C (TID: ${doc.data().tid})</p>
                        </div>
                        <button onclick="approvePay('${doc.id}', '${doc.data().uid}', ${doc.data().amt})" class="bg-green-600 px-3 py-1 rounded text-[8px] font-bold uppercase">Approve</button>
                    </div>`).join('');
            });
        }

        async function approvePay(docId, uid, amt) {
            await db.collection('users').doc(uid).update({ coins: firebase.firestore.FieldValue.increment(amt) });
            await db.collection('coinRequests').doc(docId).update({ status: 'approved' });
            showNoti("Payment Approved");
        }

        // UTILS
        function toggleMenu() { sidebar.classList.toggle('active'); overlay.classList.toggle('hidden'); }
        function showSection(id) { 
            document.querySelectorAll('main > div').forEach(d => d.classList.add('hidden')); 
            document.getElementById(id).classList.remove('hidden'); 
            window.scrollTo(0,0);
        }
        function navTo(id) { showSection(id); toggleMenu(); }
        function showNoti(m, t='success') {
            const b = document.createElement('div');
            b.className = `p-4 glass-card border-l-4 ${t==='success'?'border-gold':'border-red-500'} text-[10px] font-bold slide-down`;
            b.innerText = m;
            notiBox.appendChild(b);
            setTimeout(() => b.remove(), 3000);
        }

        // ADS REWARD
        async function startWatchAds() {
            const d = (await db.collection('settings').doc('ads').get()).data();
            if(!d?.video) return showNoti("No Ads Available", "error");
            adVidBox.classList.remove('hidden');
            adIframe.src = d.video;
            watchBtn.classList.add('hidden');
            setTimeout(() => claimBtn.classList.remove('hidden'), 15000);
        }

        async function claimAdCoin() {
            await db.collection('users').doc(auth.currentUser.uid).update({ coins: firebase.firestore.FieldValue.increment(20) });
            adVidBox.classList.add('hidden');
            claimBtn.classList.add('hidden');
            watchBtn.classList.remove('hidden');
            showNoti("+20 Credits Claimed");
        }

        // SAVE LOGIC (FOR ADMIN)
        async function saveNovel() {
            await db.collection('books').add({
                title: nTitle.value, cover: nCover.value, genre: nGenre.value, views: 0, date: new Date()
            });
            showNoti("Novel Registered");
            showSection('homeSection'); loadAllBooks();
        }

        async function saveChapter() {
            await db.collection('books').doc(curB).collection('chapters').add({
                title: cTitle.value, content: cContent.value, price: parseInt(cPrice.value), date: new Date()
            });
            showNoti("Chapter Published");
            showSection('chapterView');
        }

        async function submitDeposit() {
            if(!payTid.value) return showNoti("Enter TID", "error");
            await db.collection('coinRequests').add({
                uid: auth.currentUser.uid, email: auth.currentUser.email,
                amt: parseInt(coinPackage.value), tid: payTid.value,
                status: 'pending', date: new Date()
            });
            showNoti("Request Sent Successfully");
            navTo('homeSection');
        }
        
        async function redeemGift() {
            const code = redeemInput.value.trim().toUpperCase();
            const snap = await db.collection('giftCodes').where('code','==',code).get();
            if(snap.empty) return showNoti("Invalid Code", "error");
            const doc = snap.docs[0];
            if(doc.data().usedBy?.includes(auth.currentUser.uid)) return showNoti("Already Redeemed", "error");
            
            await db.collection('users').doc(auth.currentUser.uid).update({ coins: firebase.firestore.FieldValue.increment(doc.data().amt) });
            await doc.ref.update({ usedBy: firebase.firestore.FieldValue.arrayUnion(auth.currentUser.uid) });
            showNoti(`Redeemed +${doc.data().amt}C`);
            redeemInput.value = "";
        }
        
        async function loadAds() {
            const doc = await db.collection('settings').doc('ads').get();
            if(doc.exists) {
                const d = doc.data();
                homeAds.innerHTML = [d.s1, d.s2, d.s3].filter(x=>x).map(s => `<img src="${s}" class="w-full h-48 object-cover snap-center flex-shrink-0">`).join('');
            }
        }
    </script>
</body>
</html>
